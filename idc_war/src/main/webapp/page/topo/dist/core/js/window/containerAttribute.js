define(["text!template/containerAttribute.html","window/base","tool/util","element/Container"],function(e,a,t,n){var o=$(e),i=o.find("[name=topo_container_attribute]").hide();return $("body").append(o),{init:function(e){function l(e){var a=0,t=i.target;"create"==i.mode&&t&&t instanceof Array?a=t.length:"edit"==i.mode&&(a=t.childs.length);var n=Math.ceil(Math.sqrt(a));switch(e){case"flow":J.val(e),K.find("label").html("行间距"),U.find("label").html("列间距"),Q.val(0),V.val(0);break;case"grid":J.val(e),K.find("label").html("行数"),U.find("label").html("列数"),Q.val(n||4),V.val(n||4)}}function r(e,t){e.percent=t,a.setPercent(e,parseInt(t))}function d(e){p.find("span:first").text("编辑分组"),i.show(),i.target=e,i.mode="edit",h.val(e.prop.name),v.val(e.prop.textPosition),_.attr("src",e.prop.image),y.val(e.fillColor),r(I,100*e.alpha),L.val(e.borderWidth),P.val(e.borderColor),T.val(e.borderRadius),B[0].checked=e.prop.setMember.showName,z[0].checked=e.prop.setMember.showLink,"set"==e.prop.layoutType?E.click():(S.click(),l(e.prop.layoutType),Q.val(e.prop.layoutRow),V.val(e.prop.layoutColumn)),j.val(e.width),F.val(e.height)}function s(e){p.find("span:first").text("创建分组"),i.show(),i.mode="create",i.target=e}var c=o.find("[name=image_select]"),m=c.find("[name=topo_container_selected_image]");i.css(a.defaultPosition);var p=i.find("[name=head]"),f=i.find("[name=name_group]"),h=f.find("[name=name]"),u=i.find("[name=position_group]"),v=u.find("[name=position]"),g=i.find("[name=image_group]"),_=g.find("[name=image]"),w=g.find("[name=find_image]"),b=i.find("[name=fill_color_group]"),y=b.find("[name=selected_color]"),k=b.find("[name=color_palette]"),C=i.find("[name=alpha_group]"),I=C.find("[name=alpha]"),x=C.find(".progress"),N=i.find("[name=border_width_group]"),L=N.find("[name=border_width_num]"),M=i.find("[name=border_color_group]"),P=M.find("[name=selected_color]"),W=M.find("[name=color_palette]"),R=i.find("[name=border_radius_group]"),T=R.find("[name=border_radius]"),A=i.find("[name=set_member_group]"),B=A.find("[name=show_name]"),z=A.find("[name=show_link]"),H=i.find("[name=layout_group]"),q=H.find("[name=layout]"),S=H.find("[name=layout][value=auto]"),E=H.find("[name=layout][value=set]"),O=i.find("[name=width_group]"),j=O.find("[name=width]"),D=i.find("[name=height_group]"),F=D.find("[name=height]"),G=i.find("[name=select_layout_group]"),J=G.find("[name=select_layout]"),K=i.find("[name=row_space_group]"),Q=K.find("[name=row_space_num]"),U=i.find("[name=column_space_group]"),V=U.find("[name=column_space_num]"),X=i.find("[name=ok]"),Y=i.find("[name=cancel]"),Z=c.find("[name=ok]"),ee=(c.find("[name=image_show]"),[f,u,g,b,C,N,M,R,O,D,G,K,U]),ae=[h,v,_,y,I,L,P,T,j,F,J,Q,V];p.find(".close").click(function(){Y.click()}),a.resetHide(ae,ee),a.moveable(p,i),a.colorSelect(y,k),a.colorSelect(P,W),a.resizeNum(N,{bottom:0}),a.resizeNum(K,{bottom:1,step:1}),a.resizeNum(U,{bottom:1,step:1}),a.progressClick(x,I),r(I,100);var te=!0;w.click(function(t){if(te){var n=e.prop.config.image||{};$.each(n,function(e,t){var n=$("<div class='panel panel-default'><div class='panel-heading' role='tab'><h4 class='panel-title'><a data-toggle='collapse' data-parent='[name=topo_container_selected_image]' href='[name=topo_container_selected_image_"+e+"]'  aria-controls='collapseOne'>"+e+"</a></h4></div><div name='topo_container_selected_image_"+e+"' class='panel-collapse collapse' role='tabpanel' ><div class='panel-body'><div class='container'><div class='row'><div name='image_show' class='btn-group col-md-6' data-toggle='buttons'></div></div></div></div></div></div>");m.append(n),$.each(t,function(e,t){a.makeImageBtn(n.find("[name=image_show]"),t)})}),te=!1}m.find(".panel:first").find("a").click(),c.modal("toggle")}),Z.click(function(){_.attr("src",m.find(".in").find(".active img").attr("src")),c.modal("toggle")}),c.on("hidden.bs.modal",function(e){m.find("[name=image_show]").find(".active").removeClass("active"),m.find(".in").collapse("hide")}),q.click(function(){var e=i.target,a=0,t=0;if(e&&e instanceof Array){var n=Math.ceil(Math.sqrt(e.length));a=(e[0].width+20)*n,t=(e[0].height+20)*n,j.val(a),F.val(t)}i.layout=$(this).val(),"auto"==i.layout?(j.show(),F.show(),J.show(),Q.show(),V.show()):"set"==i.layout&&(j.hide(),F.hide(),J.hide(),Q.hide(),V.hide())}),E.click(),J.change(function(){l($(this).val())});var ne=_.attr("src");return i.on("resetWindow",function(){h.val(""),v.val("Bottom_Center"),_.attr("src",ne),r(I,100),B[0].checked=!0,z[0].checked=!0,y.val(""),P.val(""),E.click(),j.val(""),F.val(""),J.val("flow"),Q.val(1),V.val(1),i.hide(),i.css(a.defaultPosition)}),Y.click(function(){i.trigger("resetWindow")}),X.click(function(){var a=i.target,o=h.val(),l=v.val(),r=_.attr("src"),d=t.transHex(y.val()),s=I.percent/100,c=parseInt(L.val()),m=t.transHex(P.val()),p=parseInt(T.val()||0),f=z[0].checked,u=B[0].checked;if("edit"==i.mode)a.setName(o),a.setTextPosition(l),a.setImage(r),a.fillColor=d,a.alpha=s,a.borderWidth=c,a.borderColor=m,a.borderRadius=p,a.prop.setMember.showLink=f,a.prop.setMember.showName=u,"auto"==i.layout?($.each(a.childs,function(e,t){"node"!=t.prop.nodeType&&a.removeNode(t)}),a.setLayout({type:J.val(),row:parseInt(Q.val()),column:parseInt(V.val())}),a.width=parseInt(j.val()),a.height=parseInt(F.val())):"set"==i.layout&&a.setLayout(),a.show();else if("create"==i.mode){var g=n.create({name:o,textPosition:l,image:r,fillColor:d,alpha:s,borderWidth:c,borderColor:m,borderRadius:p,showName:u,showLink:f},e),w=t.getCenterPosition(e);"auto"==i.layout?(g.setLayout({type:J.val(),row:parseInt(Q.val()),column:parseInt(V.val())}),g.width=parseInt(j.val()),g.height=parseInt(F.val()),g.setLocation(w.x-g.width/2,w.y-g.height/2)):g.setLocation(w.x,w.y),a instanceof Array?$.each(a,function(e,a){g.addNode(a)}):g.addNode(a),e.addElement(g)}i.trigger("resetWindow")}),{win:i,name:h,position:v,image:_,fillColor:y,alpha:I,borderWidth:L,borderColor:P,borderRadius:T,auto:S,set:E,width:j,height:F,layoutType:J,layoutRow:Q,layoutColumn:V,okBtn:X,cancelBtn:Y,edit:d,create:s}}}});
//# sourceMappingURL=containerAttribute.js.map