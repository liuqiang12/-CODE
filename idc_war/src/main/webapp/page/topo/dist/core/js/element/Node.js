define(["tool/util","JTopo"],function(t){function e(){this.visible=!0}function o(){this.visible=!1}function i(t){t?(this.alpha=parseInt(t),this.alarmAlpha=parseInt(t)):(this.alpha=.1,this.alarmAlpha=.1)}function r(t,e){function o(t,e){t.prop.flash&&clearInterval(t.prop.flash),t.prop.flash=setInterval(function(){e?(t.shadowBlur+=10,t.shadowBlur>=100&&(e=!1)):(t.shadowBlur-=10,t.shadowBlur<=10&&(e=!0))},100)}t.shadow=!0,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor="rgba("+e+",1)",t.shadowBlur=10,o(t,!0)}$.each(["Node","TextNode"],function(t,r){JTopo[r].prototype.setAlpha=i,JTopo[r].prototype.show=e,JTopo[r].prototype.hide=o}),JTopo.Node.prototype.setNodeImage=function(t){this.setImage(t),this.prop.image=t},JTopo.Node.prototype.setTextPosition=function(t){switch(this.textPosition=t,this.prop.textPosition=t,this.text=this.prop.name,t){case"Hidden":this.text="";break;case"Bottom_Center":this.textOffsetX=0,this.textOffsetY=0;break;case"Top_Center":this.textOffsetX=0,this.textOffsetY=0;break;case"Middle_Left":this.textOffsetX=-5,this.textOffsetY=0;break;case"Middle_Right":this.textOffsetX=5,this.textOffsetY=0}},JTopo.TextNode.prototype.setFontColor=function(e){this.fontColor=t.transHex(e.toLowerCase()),this.prop.fontColor=e},JTopo.TextNode.prototype.setFont=function(t,e){e?(this.font=t+"px "+e,this.prop.font=e):this.font=t+"px "+this.prop.font,this.prop.fontSize=t},JTopo.Node.prototype.drawAlarm=function(e){if(this.prop.scene){var o=this.prop.scene.prop.config,i=e.color?e.color.toLowerCase():this.prop.alarmLevel?o.alarm.color[this.prop.alarmLevel-1]:"0,0,255";this.alarm=e.text||this.alarm||"No Alarm Text!",this.alarmColor=t.transHex(i),this.alarmAlpha=1,this.alarmFont=(e.size||20)+"px "+(e.font||"微软雅黑"),this.prop.alarmLevel=e.level||this.prop.alarmLevel||o.alarm.color.length,this.prop.alarmColor=i,r(this,this.alarmColor)}};var a={Segment:100,"ztype.shape":1e5,"ztype.text":1e6,"ztype.url":1e7,"ztype.topo":1e8,"ztype.layer":1e9,"ztype.view":1e11,"ztype.obj":1e13,"ztype.grid":1e14};return{createNode:function(e){var o=e||{},i=new JTopo.Node,r=o.name||"node",n=o.image||"img/mo/wlan_4.png",p=o.width?o.width:64,s=o.height?o.height:64,h=o.alpha||1,l=o.x||0,f=o.y||0,d=o.fontSize||16,x=o.font||"微软雅黑",c=o.zIndex||200,m=o.id||"",T=o.pid||"",u=o.color||n||JTopo.util.randomColor(),w=o.textPosition||"Bottom_Center",g=o.nodeType||"node",y=o.text||"",z=o.eweight||a[g]||10;return i.font=d+"px "+x,i.text=y,i.setLocation(l,f),i.setImage(n),i.zIndex=c,i.alpha=h,i.setSize(p,s),i.fillColor=t.transHex(u.toLowerCase()),i.prop={id:m,pid:T,name:r,image:n,nodeType:g,eweight:z},i.setTextPosition(w),i.exprop={},i},createTextNode:function(e){var o=e||{},i=new JTopo.TextNode,r=o.x||0,n=o.y||0,p=o.fontSize||20,s=o.font||"微软雅黑",h=o.zIndex||200,l=o.alpha||1,f=o.id||"",d=o.pid||"",x=o.name||"",c=o.text||"no text here",m=o.nodeType||"text",T=o.eweight||a[m]||1e6,u=o.fontColor||"255,255,255";return i.text=c,i.setLocation(r,n),i.zIndex=h,i.alpha=l,i.font=p+"px "+s,i.fontColor=t.transHex(u.toLowerCase()),i.prop={id:f,pid:d,name:x,font:s,fontSize:p,fontColor:u,nodeType:m,eweight:T},i.exprop={},i},createShape:function(t){var e=t||{},o=new JTopo.Node,i=e.width>0?e.width:100,r=e.height>0?e.height:50,n=e.x||0,p=e.y||0,s=e.fontSize||20,h=e.font||"微软雅黑",l=e.id||"",f=e.pid||"",d=e.name||"",x=e.text||"",c=e.zIndex||150,m=e.alpha||.8,T="rgba("+(e.color?e.color:"55,180,74")+","+m+")",u=e.nodeType||"object",w=e.eweight||a[u]||1e5,g=e.textPosition||"Bottom_Center";return o.text=x,o.setLocation(n,p),o.setSize(i,r),o.zIndex=c,o.font=s+"px "+h,o.showSelected=!0,o.dragable=!0,o.editAble=!0,o.paint=function(t){var e=this.width/2,o=this.height/2,i=.5*e,r=.6*o;t.save(),t.beginPath(),t.moveTo(0,o),t.bezierCurveTo(i,o,e,r,e,0),t.bezierCurveTo(e,-r,i,-o,0,-o),t.bezierCurveTo(-i,-o,-e,-r,-e,0),t.bezierCurveTo(-e,r,-i,o,0,o),t.closePath(),t.fillStyle=T,t.fill(),t.restore(),this.paintText(t)},o.prop={id:l,pid:f,name:d,nodeType:u,eweight:w},o.setTextPosition(g),o.exprop={},o}}});
//# sourceMappingURL=Node.js.map